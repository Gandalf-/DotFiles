#!/bin/bash

# use fzf to fuzzy select a tmux session or create one

[[ $TMUX ]] && change="switch-client" || change="attach-session"

session="$(
  tmux list-sessions -F "#{session_name}" 2>/dev/null \
    | fzf --exit-0 --print-query \
    | tail -n 1
  )"
[[ $session ]] || exit 0

if ! tmux has-session "$session"; then
  tmux new-session -d -s "$session" -c "$HOME"
fi

tmux "$change" -t "$session"
